<!DOCTYPE html>
<html>
<head>
    <title>Prediksi Popularitas Destinasi Wisata</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .hidden { display: none; }
        .error { color: red; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Prediksi Popularitas Destinasi Wisata</h1>
        <form id="predictionForm">
            <div class="form-group">
                <label>Rating (1-5):</label>
                <input type="number" name="rating" min="1" max="5" step="0.1" required>
            </div>
            
            <div class="form-group">
                <label>Jumlah Review:</label>
                <input type="number" name="jumlah_review" min="0" required>
            </div>
            
            <div class="form-group">
                <label>Kategori (format: ["Pantai", "Gunung"]):</label>
                <input type="text" name="kategori" placeholder='Contoh: ["Pantai", "Gunung"]' required>
            </div>
            
            <div class="form-group">
                <label>Provinsi:</label>
                <select name="provinsi" required>
                    <option value="Bali">Bali</option>
                    <option value="Jawa Barat">Jawa Barat</option>
                    <!-- Tambahkan sesuai kebutuhan -->
                </select>
            </div>
            
            <button type="submit">Prediksi</button>
        </form>
        
        <div id="result" class="hidden">
            <h2>Hasil Prediksi</h2>
            <p>Status: <span id="predictionResult"></span></p>
            <p>Tingkat Keyakinan: <span id="confidence"></span>%</p>
        </div>
        
        <div id="error" class="hidden error"></div>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Reset UI
            document.getElementById('error').classList.add('hidden');
            document.getElementById('result').classList.add('hidden');
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    body: new FormData(this),
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                const data = await response.json();
                
                if (data.status === 'error') {
                    document.getElementById('error').textContent = data.message + 
                        (data.details ? "\n" + data.details : "");
                    document.getElementById('error').classList.remove('hidden');
                } else {
                    document.getElementById('predictionResult').textContent = data.prediksi;
                    document.getElementById('confidence').textContent = data.confidence;
                    document.getElementById('result').classList.remove('hidden');
                }
            } catch (error) {
                document.getElementById('error').textContent = "Koneksi jaringan error";
                document.getElementById('error').classList.remove('hidden');
            }
        });
    </script>
</body>
</html>